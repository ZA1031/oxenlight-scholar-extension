<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="popup.css">
</head>

<body>
    <div class="container">
        <div class="header">
            <h3>OXenLight Scholar Extension</h3>
        </div>

        <!-- Login Form -->
        <div id="login-form" class="content-section hidden">
            <div class="welcome-badge">
                Welcome! Please login to continue
            </div>
            <div class="form-group platform-url">
                <label for="platform-url">Platform URL</label>
                <input type="url" id="platform-url" class="form-control" placeholder="https://sitename.com" required
                    disabled>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" class="form-control" placeholder="student@university.edu" required>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" class="form-control" placeholder="Your password" required>
            </div>
            <div class="form-group remember-me">
                <label class="checkbox-label">
                    <input type="checkbox" id="remember-me">
                    <span class="remember-me-label">Remember me</span>
                </label>
            </div>
            <div class="actions">
                <button id="login-btn" class="btn btn-primary">
                    Login
                </button>
            </div>
            <div class="login-links">
                <a href="#" id="forgot-password">Forgot password?</a>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>Analyzing page...</p>
        </div>

        <!-- Paper Info -->
        <div id="paper-info" class="content-section hidden">
            <div class="paper-card">
                <div class="paper-header">
                    <h3 class="paper-title" id="paper-title"></h3>
                    <div class="paper-badges">
                        <span class="paper-type-badge" id="paper-type"></span>
                        <span class="peer-reviewed-badge hidden" id="peer-reviewed-badge">Peer Reviewed</span>
                    </div>
                </div>

                <div class="paper-meta-grid">
                    <div class="meta-item">
                        <span class="meta-label">Authors</span>
                        <span class="meta-value" id="paper-authors"></span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Year</span>
                        <span class="meta-value" id="paper-year"></span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Venue</span>
                        <span class="meta-value" id="paper-venue"></span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Citations</span>
                        <span class="meta-value" id="paper-citations"></span>
                    </div>
                </div>

                <div class="paper-summary">
                    <div class="summary-header">
                        <span class="meta-label">Summary</span>
                    </div>
                    <div class="summary-content">
                        <p id="paper-summary"></p>
                        <button class="read-more-btn hidden" id="read-more-btn">Read more</button>
                    </div>
                </div>

                <div class="paper-link">
                    <span class="meta-label">Source</span>
                    <a href="#" id="paper-link" class="source-link" target="_blank">View original paper</a>
                </div>
            </div>

            <div class="actions">
                <button id="request-btn" class="btn btn-primary">
                    Request Paper
                </button>
                <button id="manual-btn" class="btn btn-secondary">
                    Manual Entry
                </button>
            </div>
        </div>

        <!-- Manual Form -->
        <div id="manual-form" class="content-section hidden">
            <div class="manual-form">
                <div class="manual-form-header">
                    <svg class="manual-form-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M16 13H8" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M16 17H8" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M10 9H9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    <h4>Manual Paper Entry</h4>
                </div>

                <div class="auto-fill-section">
                    <div class="input-group">
                        <input type="text" id="manual-title" placeholder="Enter paper title to auto-fill details"
                            class="form-control" style="border-top-right-radius: 0; border-bottom-right-radius: 0;" />
                        <button type="button" id="manual-auto-fill-btn" class="btn btn-primary" style="display: none;">
                            <span class="indicator-label">Auto Fill</span>
                            <span class="indicator-progress"> <!-- REMOVED style="display: none;" -->
                                <span class="spinner-border spinner-border-sm align-middle ms-1"></span>
                            </span>
                        </button>
                    </div>

                    <div id="manual-auto-fill-results" class="auto-fill-results" style="display: none;">
                        <!-- Auto-fill results will appear here -->
                    </div>
                </div>

                <div class="form-field">
                    <label for="manual-authors">Authors</label>
                    <input type="text" id="manual-authors" placeholder="Comma separated list of authors">
                </div>

                <div class="form-field">
                    <label for="manual-year">Year Published</label>
                    <input type="text" id="manual-year" placeholder="Publication year">
                </div>
                <div class="form-field">
                    <label for="manual-venue">Journal/Venue</label>
                    <input type="text" id="manual-venue" placeholder="Journal, conference, or venue name">
                </div>
                <div class="actions">
                    <button id="submit-manual" class="btn btn-primary">Submit Request</button>
                    <button id="cancel-manual" class="btn btn-secondary">Back</button>
                </div>
            </div>
        </div>

        <!-- Success Message -->
        <div id="success-message" class="success-message hidden">
            <p>✅ Paper requested successfully!</p>
        </div>

        <!-- Error Message -->
        <div id="error-message" class="error-message hidden">
            <p id="error-text"></p>
            <div class="error-actions">
                <button id="back-to-login" class="btn btn-primary">Login</button>
                <button id="back-to-paper" class="btn btn-secondary">Back</button>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <!-- Authenticated User Links -->
            <div id="authenticated-links" class="hidden">
                <a href="#" id="open-dashboard">Open Dashboard</a>
                <span style="margin: 0 8px; color: #ddd;">•</span>
                <a href="#" id="logout-btn">Logout</a>
            </div>

            <!-- Unauthenticated User Links -->
            <div id="unauthenticated-links">
                <a href="#" id="learn-more">Learn More</a>
            </div>
        </div>
    </div>

    <script src="popup.js"></script>
</body>

</html>